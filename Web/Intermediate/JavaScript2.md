# 什么是 JavaScript
- HTML是一种标记语言，用来结构化我们的网页内容并赋予内容含义，例如定义段落、标题和数据表，或在页面中嵌入图片和视频。
- CSS 是一种样式规则语言，可将样式应用于 HTML 内容，例如设置背景颜色和字体，在多个列中布局内容。
- JavaScript 是一种脚本语言，可以用来创建动态更新的内容，控制多媒体，制作图像动画，还有很多。

**能做什么**
- 在变量中储存有用的值。
- 操作一段文本。
- 运行代码以响应网页中发生的特定事件。

API 是已经建立好的一套代码组件，可以让开发者实现原本很难甚至无法实现的程序。

API 通常分为两类
- 浏览器 API 内建于 web 浏览器中
  - 文档对象模型API（DOM）能通过创建、移除和修改HTML，为页面动态应用新样式等手段来操作 HTML 和 CSS。
  - 地理位置 API（Geolocation API）获取地理信息。
  - 画布（Canvas） 和 WebGL API 可以创建生动的 2D 和 3D 图像。
- 第三方API并没有默认嵌入浏览器中，一般要从网上取得它们的代码和信息。
  - 微博

**浏览器安全**
每个浏览器标签页就是其自身用来运行代码的独立容器（这些容器用专业术语称为“运行环境”）。大多数情况下，每个标签页中的代码完全独立运行，而且一个标签页中的代码不能直接影响另一个标签页（或者另一个网站）中的代码。

当浏览器执行到一段 JavaScript 代码时，通常会按从上往下的顺序执行这段代码。这意味着你需要注意代码书写的顺序。

JavaScript 是一门解释型语言，因为编译过程发生在代码运行中，而非之前。

**服务器端代码 vs 客户端代码**
客户端代码是在用户的电脑上运行的代码，在浏览一个网页时，它的客户端代码就会被下载，然后由浏览器来运行并展示。这就是客户端 JavaScript。

服务器端代码在服务器上运行，接着运行结果才由浏览器下载并展示出来。

**怎样向页面添加 JavaScript？**
内部JavaScript
在 </head> 标签结束前插入以下代码
```html
<script>
    // js 代码
</script>
```

JavaScript 是区分大小写的。

外部JavaScript
    <script src="script.js" async></script>

**async和defer**
- 如果脚本无需等待页面解析，且无依赖独立运行，那么应使用 async。
- 如果脚本需要等待页面解析，且依赖于其他脚本，调用这些脚本时应使用 defer，将关联的脚本按所需顺序置于 HTML 中。

**注释**
    // 单条注释
    
    /* 多行注释
    */

# 使用变量存储信息
一个变量，就是一个用于存放数值的容器。这个数值可能是一个用于累加计算的数字，或者是一个句子中的字符串。变量的独特之处在于它存放的数值是可以改变的。

变量的另一个特性就是它们能够存储任何的东西，不只是字符串和数字。变量可以存储更复杂的数据，甚至是函数。

变量不是数值本身，它们仅仅是一个用于存储数值的容器。你可以把变量想象成一个个用来装东西的纸箱子。
![](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/First_steps/Variables/boxes.png)

**声明变量**
    let myAge;
    当 JavaScript 中的变量被声明的时候，程序内部会给它一个初始值 undefined。 当你对一个值为 undefined 的变量进行运算操作的时候，算出来的结果将会是 NaN，它的意思是 "Not a Number"。 如果你用 undefined 变量连接一个字符串，你将得到一个 undefined 的 字符串。

    const myAge;

声明的变量是只读的。 它们是一个常量值。
    
当你想要改变变量时使用 let，当你想要变量保持不变时使用 const。

在 JavaScript 中，所有代码指令都会以分号结尾。

**初始化变量**
    myAge = 30;

也可以声明变量的同时初始化。
    let myAge = 30;

**更新变量**
    myAge = 35;
    

**变量命名规则**
- 一般你应当坚持使用拉丁字符 (0-9,a-z,A-Z) 和下划线字符。
- 变量名不要以下划线开头。
- 变量名不要以数字开头。
- 用来将多个单词组在一起，小写整个命名的第一个字母然后大写剩下单词的首字符。（小写驼峰命名法）
- 变量名大小写敏感。
- 避免使用 JavaScript 的保留字给变量命名。

**变量类型**
- Number：整数或者浮点数
- String：字符串文本，需要单引号或双引号把值包起来
- Boolean：true或false
- Array：单个对象包含很多值，用方括号括起来，并用逗号分隔，使用索引访问对应位置的值
- Object：对象是现实生活中的模型的一种代码结构

**动态类型**
JavaScript 是一种“动态类型语言”，不需要指定变量将包含什么数据类型。

# 数字和操作符
**数字类型**
- 整数
- 浮点数：有小数点
- 双精度：比标准浮点数精度更高

JavaScript 只有一个数据类型用来表示数字：Number。

**算数运算符**
- \+：加法
- \-：减法
- \*：乘法
- \/：除法
- \%：取余
- \**：幂

参与计算的数字被称为*操作数*。

**自增自减**
```JavaScript
let num1 = 4;
num1++;
num2--;

```

**赋值运算符**
- +=：加法赋值，右边的数值加上左边的变量，然后再返回新的变量。
- -=：减法赋值，左边的变量减去右边的数值，然后再返回新的变量。
- *=：乘法赋值，左边的变量乘以右边的数值，然后再返回新的变量。
- /=：除法赋值，左边的变量除以右边的数值，然后再返回新的变量。

**比较运算符**
===：严格等于
!==：严格不等于
<：
\>：
\<=：
\>=：

> ==和!=也能判断相等和不相等，但它们与===/!==不同，前者测试值是否相同，但是数据类型可能不同，而后者的严格版本测试值和数据类型是否相同。

# JavaScript 中的字符串
在 JavaScript 中，您可以选择单引号或双引号来包裹字符串。

**转移字符串中的字符**
转移字符使确保能被识别成文本，而不是代码的一部分，使用反斜杠实现。

**连接字符串**
使用+操作符

**有用的字符串方法**
在 javascript 中，一切东西都可以被当作对象。一旦你的变量成为字符串对象实例，你就可以有大量的原型和方法编辑它。

- .length：获取字符串长度
- 使用索引检索特定字符串字符
- 检索子字符串：indexof()方法，返回第一个字符的索引，无法找到时返回-1
- 提取字符串，indexof()方法返回索引后，使用slice()提取，返回所有字符串，只需要指定第一个字符串索引位置。
- 转换大小写：toLowerCase()、toUpperCase()
- 替换字符串的某部分：replace()，默认返回一个新字符串而不是原地修改。

# 数组
简单来说，数组是一个包含了多个值的对象。

**创建数组**
数组由方括号构成，其中包含用逗号分隔的元素列表。可以将任何类型的元素存储在数组中 - 字符串，数字，对象，另一个变量，甚至另一个数组。

**访问和修改数组元素**
使用括号表示法访问数组中的元素.
数组中包含数组的话称之为多维数组。您可以通过将两组方括号链接在一起来访问数组内的另一个数组。

**获取数组长度**
length属性，最常用于循环遍历数组中的所有项。

1. 在数组中的元素编号 0 开始循环。
2. 在元素编号等于数组长度的时候停止循环。

**有用的数组方法**
字符串和数组之间的转换
split()方法将字符串转换成数组
join()方法将数组转换成字符串
toString()方法更简单，但是不能指定分隔符

**添加和删除数组项**
在数组末尾添加和删除
push(), pop()

# JavaScript基础要件
**条件语句**
if...else 语句
```JavaScript
if (condition) {
  /* 条件为真时运行的代码 */
} else {
  /* 否则，运行其他的代码 */
}
```
如果（if）条件（condition）返回 true，运行代码 A，否则（else）运行代码 B。
else if 连接你的额外的选择和结果。

将一个 if...else 语句放在另外一个中嵌套是完全可行的。

如果要测试多个条件，而不需要编写嵌套 if...else 语句，逻辑运算符可以帮助您。

- && 逻辑与
- || 逻辑或

switch 语句
以单个表达式/值作为输入，然后查看多个选项，直到找到与该值相匹配的选项，执行与之相关的代码。
```JavaScript
switch (表达式) {
  case 选择1:
    运行这段代码
    break;

  case 选择2:
    否则，运行这段代码
    break;

  // 包含尽可能多的情况

  default:
    实际上，仅仅运行这段代码
}
```

**循环**
一段循环通常需要一个或多个条件：
- 一个开始条件，它被初始化为一个特定的值 - 这是循环的起点。
- 一个结束条件，这是循环停止的标准 - 通常计数器达到一定值。
- 一个迭代器，这通常在每个连续循环上递增少量的计数器，直到达到退出条件。

```JavaScript
for (initializer; exit-condition; final-expression) {
  // code to run
}
```
1. 一个初始化器 - 这通常是一个设置为一个数字的变量，它被递增来计算循环运行的次数。它也有时被称为计数变量。
2. 一个退出条件 - 如前面提到的，这个定义循环何时停止循环。这通常是一个表现为比较运算符的表达式，用于查看退出条件是否已满足的测试。
3. 一个最终条件 - 这总是被判断（或运行），每个循环已经通过一个完整的迭代消失时间。它通常用于增加（或在某些情况下递减）计数器变量，使其更接近退出条件值。

**使用 break 退出循环**
如果要在所有迭代完成之前退出循环，可以使用 break 语句。

**使用 continue 跳过迭代**
跳过当前循环而执行下一个循环.

**while 语句和 do ... while 语句**
```JavaScript
initializer
while (exit-condition) {
  // code to run

  final-expression
}
```

do...while循环非常类似但在 while 后提供了终止条件：
```JavaScript
initializer
do {
  // code to run

  final-expression
} while (exit-condition)
```
在 do ... while 循环中，花括号中的代码总是在检查之前运行一次，以查看是否应该再次执行。

# 函数
**函数与方法**
二者区别在于方法是在对象内定义的函数。浏览器内置函数（方法）和变量（称为属性）存储在结构化对象内，以使代码更加高效，易于处理。

**匿名函数**
```JavaScript
function myFunction() {
  alert('hello');
}

function() {
  alert('hello');
}
```

通常将匿名函数与事件处理程序一起使用。

将匿名函数分配为变量的值(建议不要使用)，主要使用匿名函数来运行负载的代码以响应事件触发（如点击按钮） - 使用事件处理程序。再次
```JavaScript
var myGreeting = function() {
  alert('hello');
}

myGreeting();
```

**函数作用域**
当你创建一个函数时，函数内定义的变量和其他东西都在它们自己的单独的范围内，意味着它们被锁在自己独立的隔间中，不能被函数外的代码访问。

所有函数的最外层被称为全局作用域。在全局作用域内定义的值可以在任意地方访问。

**函数返回值**
返回值意如其名，是指函数执行完毕后返回的值。
return关键字

# 事件
事件是您在编程时系统内发生的动作或者发生的事情——系统会在事件出现时产生或触发某种信号，并且会提供一个自动加载某种动作的机制。

在 Web 中，事件在浏览器窗口中被触发并且通常被绑定到窗口内部的特定部分 — 可能是一个元素、一系列元素、被加载到这个窗口的 HTML 代码或者是整个浏览器窗口。举几个可能发生的不同事件：

- 用户在某个元素上点击鼠标或悬停光标。
- 用户在键盘中按下某个按键。
- 用户调整浏览器的大小或者关闭浏览器窗口。
- 一个网页停止加载。
- 提交表单。
- 播放、暂停、关闭视频。
- 发生错误

每个可用的事件都会有一个事件处理器，也就是事件触发时会运行的代码块。当我们定义了一个用来回应事件被激发的代码块的时候，我们说我们注册了一个事件处理器。注意事件处理器有时候被叫做事件监听器——从我们的用意来看这两个名字是相同的，尽管严格地来说这块代码既监听也处理事件。监听器留意事件是否发生，然后处理器就是对事件发生做出的回应。每个可用的事件都会有一个事件处理器，也就是事件触发时会运行的代码块。


# JavaScript 对象
**JavaScript 对象基础**
对象是一个包含相关数据和方法的集合（通常由一些变量和函数组成，我们称之为对象里面的属性和方法）。

**定义对象**
```JavaScript
var objectName = {
  member1Name : member1Value,
  member2Name : member2Value,
  member3Name : member3Value
}
```

**点表示法**
使用点表示法 (dot notation) 来访问对象的属性和方法。

对象的名字表现为一个命名空间 (namespace)，它必须写在第一位——当你想访问对象内部的属性或方法时，然后是一个点 (.)，紧接着是你想要访问的项目，标识可以是简单属性的名字 (name)，或者是数组属性的一个子元素，又或者是对象的方法调用。

**this的含义**
```JavaScript
greeting: function() {
  alert('Hi! I\'m ' + this.name.first + '.');
}
```
关键字"this"指向了当前代码运行时的对象。

# 对象原型
JavaScript 中所有的对象都有一个内置属性，称为它的 prototype（原型）。它本身是一个对象，故原型对象也会有它自己的原型，逐渐构成了原型链。原型链终止于拥有 null 作为其原型的对象上。

当你试图访问一个对象的属性时：如果在对象本身中找不到该属性，就会在原型中搜索该属性。如果仍然找不到该属性，那么就搜索原型的原型，以此类推，直到找到该属性，或者到达链的末端，在这种情况下，返回 undefined。

**属性遮蔽**
一个对象中定义了一个属性，而在该对象的原型中定义了一个同名的属性，默认覆盖原型的属性。

**构造函数**
在 JavaScript 中，所有的函数都有一个名为 prototype 的属性。当你调用一个函数作为构造函数时，这个属性被设置为新构造对象的原型（按照惯例，在名为 __proto__ 的属性中）。

方法是在原型上定义的，但数据属性是在构造函数中定义的。

# 面向对象编程基本概念

面向对象编程将一个系统抽象为许多对象的集合，每一个对象代表了这个系统的特定方面。对象包括函数（方法）和数据。一个对象可以向其他部分的代码提供一个公共接口，而其他部分的代码可以通过公共接口执行该对象的特定操作，系统的其他部分不需要关心对象内部是如何完成任务的，这样保持了对象自己内部状态的私有性。

当人们谈论面向对象编程时，通常来说是指基于类的面向对象编程。

**类与实例**
当我们使用面向对象编程的术语对一个问题进行建模时，我们会创建一系列抽象的定义，这些定义代表了系统中存在的各类对象。

就其本身而言，类并不做任何事情，类只是一种用于创建具体对象的模板。

```JavaScript
class Professor
    properties
        name
        teaches
    constructor
        Professor(name, teaches)
    methods
        grade(paper)
        introduceSelf()
```

Professor 类可以创建一个具体的教授，我们称这样创建出来的具体教授为 Professor 类的实例。由类创建实例的过程是由一个特别的函数——构造函数所完成的。
开发人员将类所需要的值传入构造函数，构造函数即可根据传入的值初始化实例的内部状态。

通常来说，需要将构造函数作为类定义的一部分明确声明，并且构造函数通常具有和类名相同的函数名。编程语言通常使用 new 关键字来表示执行构造函数。

**继承**

当一个方法拥有相同的函数名，但是在不同的类中可以具有不同的实现时，称这一特性为多态。当一个方法在子类中替换了父类中的实现时，称之为子类重写/重载了父类中的实现。

**封装**
当其他部分的代码想要执行对象的某些操作时，可以借助对象向外部提供的接口完成操作，借此，对象保持了自身的内部状态不会被外部代码随意修改。也就是说，对象的内部状态保持了私有性，而外部代码只能通过对象所提供的接口访问和修改对象的内部状态，不能直接访问和修改对象的内部状态。保持对象内部状态的私有性、明确划分对象的公共接口和内部状态，这些特性称之为封装（encapsulation）。

封装的好处在于，当程序员需要修改一个对象的某个操作时，程序员只需要修改对象对应方法的内部实现即可，而不需要在所有代码中找出该方法的所有实现，并逐一修改。某种意义上来说，封装在对象内部和对象外部设立了一种特别的“防火墙”。

在许多面向对象编程语言中，我们可以使用 private 关键字标记对象的私有部分，也就是外部代码无法直接访问的部分。如果一个属性在被标记为 private 的情况下，外部代码依旧尝试访问该属性，那么通常来说，计算机会抛出一个错误。

# JavaScript中的类
**类和构造函数**
使用 class 关键字声明一个类
```JavaScript
class Person {

  name;

  constructor(name) {
    this.name = name;
  }

  introduceSelf() {
    console.log(`Hi! I'm ${this.name}`);
  }

}
```

- 一个 name 属性
- 一个需要 name 参数的构造函数，这一参数用于初始化新的对象的 name 属性。
- 一个 introduceSelf() 方法，使用 this 引用了对象的属性。

构造函数使用 constructor 关键字来声明。
- 创建一个新的对象
- 将 this 绑定到这个新的对象，你可以在构造函数代码中使用 this 来引用它
- 执行构造函数中的代码
- 返回这个新的对象

我们使用类的名字来调用构造函数。

```JavaScript
const giles = new Person('Giles');
```

**省略构造函数**
如果你不需要任何特殊的初始化内容，你可以省略构造函数，默认的构造函数会被自动生成。

**继承**
使用 extends 关键字来声明这个类继承自另一个类。

```JavaScript
class Professor extends Person {

  teaches;

  constructor(name, teaches) {
    super(name);
    this.teaches = teaches;
  }

  introduceSelf() {
    console.log(`My name is ${this.name}, and I will be your ${this.teaches} professor.`);
  }

  grade(paper) {
    const grade = Math.floor(Math.random() * (5 - 1) + 1);
    console.log(grade);
  }

}
```
> 如果子类有任何自己的初始化内容需要完成，它也必须先使用 super() 来调用父类的构造函数，并传递父类构造函数期望的任何参数。

**封装**
私有数据属性必须在类的声明中声明，而且其名称需以 # 开头。

```JavaScript
class Student extends Person {

  #year;

  constructor(name, year) {
    super(name);
    this.#year = year;
  }


  introduceSelf() {
    console.log(`Hi! I'm ${this.name}, and I'm in year ${this.#year}.`);
  }

  canStudyArchery() {
    return this.#year > 1;
  }

}
```
与私有数据属性一样，你也可以声明私有方法。而且名称也是以 # 开头，只能在类自己的方法中调用。

```JavaScript
class Example {

  somePublicMethod() {
    this.#somePrivateMethod();
  }

  #somePrivateMethod() {
    console.log('You called me?');
  }

}
```

# 使用JSON
JSON 是一种按照 JavaScript 对象语法的数据格式，通常用于在网站上表示和传输数据，它是基于 JavaScript 语法，但它独立于 JavaScript，这也是为什么许多程序环境能够读取（解读）和生成 JSON。

JSON 可以作为一个对象或者字符串存在，前者用于解读 JSON 中的数据，后者用于通过网络传输 JSON 数据。

一个 JSON 对象可以被储存在它自己的文件中，这基本上就是一个文本文件，扩展名为 .json。

- JSON 是一种纯数据格式，它只包含属性，没有方法。
- JSON 要求在字符串和属性名称周围使用双引号。单引号无效。

**对象和文本之间的转换**
- parse(): 以文本字符串形式接受 JSON 对象作为参数，并返回相应的对象。
- stringify(): 接收一个对象作为参数，返回一个对应的 JSON 字符串。

# 异步JavaScript


# 客户端Web API
**Web API简介**
应用程序接口（API，Application Programming Interface）是基于编程语言构建的结构，使开发人员更容易地创建复杂的功能。它们抽象了复杂的代码，并提供一些简单的接口规则直接使用。

常见浏览器API
- 操作文档的 API内置于浏览器中。最明显的例子是DOM（文档对象模型）API，它允许您操作 HTML 和 CSS — 创建、移除以及修改 HTML，动态地将新样式应用到您的页面，等等。
- 客户端存储 API在 Web 浏览器中的使用变得越来越普遍 - 如果您想创建一个应用程序来保存页面加载之间的状态，甚至让设备在处于脱机状态时可用，那么在客户端存储数据将会是非常有用的。
- 从服务器获取数据的 API 用于更新网页的一小部分是相当好用的。

**操作文档**
通过使用文档对象模型（DOM）来实现的，这是一套用于控制 HTML 和样式信息的 API，大量使用了 Document 对象。
- 窗口是载入网页的浏览器标签，在 JavaScript 中，它由 Window 对象表示。
- 文档是加载到窗口的实际页面。

**文档对象模型**
目前在你的每一个浏览器标签中加载的文档是由一个文档对象模型表示的。这是一个由浏览器创建的“树状结构”表示法，使 HTML 结构能够被编程语言轻松访问。

![](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents/dom-screenshot.png)

数上的每个条目被称为节点。
- 根节点：树中顶层节点。
- 子节点：直接位于另一个节点内的节点
- 后代节点：位于另一个节点内任意位置的节点。
- 父节点
- 兄弟节点：DOM 树中位于同一等级的节点。

**基本DOM操作**
选择DOM元素，将他存储在变量中，使用可用的属性和方法来操作它。
    const link = document.querySelector('a');
    link.textContent = 'xxxx';
    link.href = 'xxx';

    Document.GetElementById()
    Document.GetElementByTagName()

创建新节点
    const para = document.createElement('p');
    para.textContent = 'xxxxx';

**从服务器获取数据**
现代网站和应用中另一个常见的任务是从服务端获取个别数据来更新部分网页而不用加载整个页面。
Fetch API

**客户端存储**
传统方法：
从早期的网络时代开始，网站就使用 cookies 来存储信息，以在网站上提供个性化的用户体验。

新流派：
- Web Storage API 提供了一种非常简单的语法，用于存储和检索较小的、由名称和相应值组成的数据项。
- IndexedDB API 为浏览器提供了一个完整的数据库系统来存储复杂的数据。这可以用于存储从完整的用户记录到甚至是复杂的数据类型，如音频或视频文件。

**存储简单数据- web storage**
所有的 web storage 数据都包含在浏览器内两个类似于对象的结构中
- sessionStorage：闭浏览器时数据会丢失
- localStorage：一直保存数据，甚至到浏览器关闭又开启后也是这样

    localStorage.setItem('name','Chris');
Storage.setItem() 方法允许您在存储中保存一个数据项——它接受两个参数：数据项的名字及其值。

    var myName = localStorage.getItem('name');
Storage.getItem() 方法接受一个参数——你想要检索的数据项的名称——并返回数据项的值。

    localStorage.removeItem('name');
Storage.removeItem() 方法接受一个参数——你想要删除的数据项的名称——并从 web storage 中删除该数据项。

为每个域名分离存储
每个域都有一个单独的数据存储区。

**存储复杂数据- IndexedDB**
IndexedDB API（有时简称 IDB）是可以在浏览器中访问的一个完整的数据库系统。

# Web表单
web 表单是由一个或多个表单控件，这些控件可以是文本字段（单行或多行）、选择框、按钮、复选框或单选按钮，大部分是使用 <input> 元素创建的。

![](https://developer.mozilla.org/en-US/docs/Learn/Forms/Your_first_form/form-sketch-low.jpg)

`<form>`元素
所有表单都以一个 `<form>` 元素开始：
```html
<form action="/my-handling-form-page" method="post">

</form>

```
- action 属性定义了在提交表单时，应该把所收集的数据送给谁（URL）去处理。
- method 属性定义了发送数据的 HTTP 方法（通常是 get 或 post）。

`<label>` 元素上使用 for (en-US) 属性；它是将标签链接到表单控件的一种正规方式。这个属性引用对应的表单控件的 id。

button元素
添加一个按钮，让用户在填写完表单后发送他们的数据。

